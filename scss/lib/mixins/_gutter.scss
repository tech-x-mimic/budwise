@import "./responsive";
@import "../functions/map";
@import "../functions/ununit";
@import "../../variables/gutter";

@mixin make-gutters() {
  @include responsive-each() using ($breakpoint) {
    $gutter: get-or-default($gutter-breakpoint-map, $breakpoint, $gutter-default-value);

    @each $i, $tier in $gutter-tier-map {
      $gutter-i: abs($gutter * $tier);

      @include horizontal-gutter($i, $gutter-i);

      @include vertical-gutter($i, $gutter-i);
    }
  }
}

@mixin horizontal-gutter($i, $value) {
  .g-#{$i},
  .gx-#{$i} {
    margin-left: format(-$value);
    margin-right: format(-$value);
    > * {
      padding-left: format($value);
      padding-right: format($value);
    }
  }
}

@mixin vertical-gutter($i, $value) {
  .g-#{$i},
  .gy-#{$i} {
    margin-top: format(-$value);

    > * {
      margin-top: format($value);
    }
  }
}

@function format($value) {
  @return if(un-unit($value) != 0, $value, 0);
}
