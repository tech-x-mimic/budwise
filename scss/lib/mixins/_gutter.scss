@import "../../variables/gutter";
@import "../../lib/functions/map";
@import "../../lib/functions/ununit";
@import "./responsive";

@mixin make-gutters() {
  @include responsive-each() using ($breakpoint) {
    $gutter-x: get-or-default($gutter-x-breakpoints, $breakpoint, $gutter-x-width);
    $gutter-y: get-or-default($gutter-y-breakpoints, $breakpoint, $gutter-y-height);

    @each $i, $tier in $gutter-tiers {
      $x: abs($gutter-x * $tier);
      $y: abs($gutter-y * $tier);

      .g-#{$i},
      .gx-#{$i} {
        margin-left: if(un-unit($x) != 0, -#{$x}, 0);
        margin-right: if(un-unit($x) != 0, -#{$x}, 0);

        > * {
          padding-left: if(un-unit($x) != 0, $x, 0);
          padding-right: if(un-unit($x) != 0, $x, 0);
        }
      }

      .g-#{$i},
      .gy-#{$i} {
        @if $y == 0 {
        } @else {
          margin-top: if(un-unit($y) != 0, -#{$x}, 0);

          > * {
            margin-top: if(un-unit($y) != 0, $x, 0);
          }
        }
      }
    }
  }
}
